function x = transformacao(imagemRosto, imagemFiltro, mascara, fixedPoints, movingPoints)

% leitura das imagens
ImgOrigH = imagemRosto; %imread('gatohelio.png');
MapBWCat = mascara ;    %imread('gatoferor.png');
ImgOrigG = imagemFiltro;%imread('gatofer.jpg');

[l,c] = size(MapBWCat);

% mï¿½scara
Masc = ImgOrigG;
x = MapBWCat;

%H = fspecial('average',15);
%Masc = imfilter(Masc, H);

for i = 1:l
    for j = 1:c
        if (MapBWCat(i,j) < 100)
           Masc(i,j) = 0;
        end
    end
end

%se = strel('disk', 6);
%Masc = imdilate(Masc, se);

    
%tform = fitgeotrans(movingPoints,fixedPoints,'lwm',6);
tform = fitgeotrans(movingPoints,fixedPoints,'NonreflectiveSimilarity');
%tform = fitgeotrans(movingPoints,fixedPoints,'pwl');
ajuste = imwarp(Masc,tform,'OutputView',imref2d(size(ImgOrigH)));

%imshow(ajuste);
%final = zeros(size(ImgOrigH));

[l,c] = size(ImgOrigH);

final = ImgOrigH;


k = 1;

for i = 1:l
    for j = 1:c
        if(ajuste(i,j) == 0)
            %final(i,j) = ImgOrigH(i,j);
            %aqui pega a imagem original(helio) e coloca na imagem final
        else
            %final(i,j) = ajuste(i,j);
            aux(k) = i;
            aux(k+1) = j;
            k = k+2;
            %aqui pega a imagem do gato e coloca no helio
        end
    end
end
%se = strel('disk', 4);
%ajuste = imdilate(ajuste, se);

%display(aux(55278));

sizea = size(aux);

for i = 1)    
    if(mod(i, 2) ~= 0)    
        final((aux(i)), (aux(i+1)), 1) = ajuste((aux(i)), (aux(i+1)), 1);                
        final((aux(i)), (aux(i+1)), 2) = ajuste((aux(i)), (aux(i+1)), 2);                
        final((aux(i)), (aux(i+1)), 3) = ajuste((aux(i)), (aux(i+1)), 3);
        display('ok');
    end
   
end




final = uint8(final);

%imwrite(final, 'imgFace/gatohelio.png');

%imshow(final);
x = final;
